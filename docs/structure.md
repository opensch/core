# Структура
На данной странице рассказывается о строении проекта, какие файлы что делают и какие "коллекции" есть в базе данных.

## Из каких деталей состоит проект
Сервер openSchool состоит из нескольких крайне важных частей, которые работают вместе и позволяют реализовывать наши цели. Сервер строится из следующих деталей:
	
* `main.py` - основной файл в проекте. Он запускает фреймворк Flask, реагирует на приходящие HTTP(S) запросы, формирует их, а также работает с авторизацией пользователей. 

	Редактируйте этот файл, если вам нужно прописать конечные точки (endpoints) для подключения, их поведение, а также если вам нужно настроить алгоритм авторизации пользователей

* `classes/` - в этой папке содержатся все категории вещей, которые существуют в openSchool, в виде Python файлов и соответствующих классов. Python классы представляют собой абстракцию для JSON-словаря, который мы получаем при работе c базой данных. Классы позволяют выполнять относительно сложные вещи, как создание пользователя или удаление опроса, быстро и одной коммандой. Также в этой папке хранится функция для соединения с базой данных. Данные авторизации уже прописаны.
	
	Редактируете файлы в этой папке, если вы создаете новую категорию для openSchool и, следовательно, её Python объект в отдельном `.py` файле с таким же названием, что и класс.

* База данных `mongoDB` - тут храняться все данные, с которыми работает сервер. Тут храняться пользователи, уроки, расписания и тому подобное.
	
	**Не рекомендованно** подключаться к базе данных напрямую, если есть Python репрезентация нужной категории! Только если вы делаете новую категорию или что-то пошло не так!

## Как устроена база данных?
На случай, если вам нужно поработать с базой данных напрямую, нужно знать структуру базы данных. 
В mongoDB существует концепт коллекций. Представьте коллекцию, как корзину, в которой храняться данные. У каждой коллекции есть название.
Рекомендованно называть коллекции по названию категории, которую вы хотите создать.

* Заметка 1: для того, чтобы посмотреть все коллекции, доступные в базе данных, запустите этот код (либо скриптом, либо в REPL):
	```python
	import pymongo
	import classes

	connection = classes.createMongo()
	print(connection.list_collection_names())
	```
* Заметка 2: Для того, чтобы подробно посмотреть конкретную категорию, какие у них параметры, конечные точки и т.д., посмотрите нужную категорию в разделе "Категории" в вики.

База данных состоит из следующих коллекций:
* `users` - данные пользователей openSchool
* `replacements` - замены уроков
* `surveys` - опросы
* `votes` - ответы пользователей в вышеупомянутые опросах
* `usersNotes` - заметки пользователей к какому-либо предмету
* `usersHomework` - то же, что и заметки, но ярче отображаются
* `cabinets` - данные о кабинетах в школе
* `timetable` - куски расписания для классов 
* `lessons` - данные о каком-либо уроке

